<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mxlib: Getting ATLAS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="mxlib.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mxlib
   </div>
   <div id="projectbrief">c++ tools for analyzing astronomical data and other tasks by Jared R. Males</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__atlas.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Getting ATLAS<div class="ingroups"><a class="el" href="group__gen__math.html">General Mathematics</a> &raquo; <a class="el" href="group__template__blaslap.html">Templatized BLAS and Lapack</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Instructions for building and installing the Automatically Tune Linear Algebra Software (ATLAS)  
<a href="#details">More...</a></p>
<p>Instructions for building and installing the Automatically Tune Linear Algebra Software (ATLAS) </p>
<p>Folow these steps to build an ATLAS based BLAS and Lapack library.</p>
<ol type="1">
<li>download, but do not unpack, the latest LAPACK library from <a href="http://www.netlib.org/lapack/">http://www.netlib.org/lapack/</a><ul>
<li>As of July 2015 (lapack version 3.5.0, it appears to be better to checkout the SVN repo, at least rev 1558, for good behavior in XSYEVR. If you do this, you need to make your own .tgz by zipping up the downloaded trunk directory.</li>
</ul>
</li>
<li>download ATLAS (<a href="http://math-atlas.sourceforge.net/">http://math-atlas.sourceforge.net/</a>), unpack. It's a good idea to rename it to ATLASX.XX.XX. In the ATLASX.XX.XX directory, make a 'LINUX' directory, or whatever seems like a good name for your system.</li>
<li>Turn off frequency scaling:<ul>
<li>Ubuntu:<ol type="a">
<li>cpufreq-info &ndash;&gt; note that it references the ondemand governor</li>
<li>sudo vi /etc/default/cpufrequtils &ndash;&gt; create if this file doesn't exist<ul>
<li>add: GOVERNOR="performance"</li>
</ul>
</li>
<li>sudo /etc/init.d/cpufrequtils restart</li>
<li>cpufreq-info &ndash;&gt; where before it referenced the ondemand governor, now it says performance</li>
</ol>
</li>
<li>CentOS:<ol type="a">
<li>edit /etc/sysconfig/cpuspeed, setting GOVERNOR=performance</li>
<li>restart cpuspeed: /etc/init.d/cpuspeed restart</li>
<li>output should say "enabling performance cpu frequency scaling"</li>
</ol>
</li>
</ul>
</li>
<li>Build Atlas:<ul>
<li><p class="startli">In the 'LINUX' directory, run configure: </p><div class="fragment"><div class="line">../configure -b 64 --with-netlib-lapack-tarfile=/home/jaredmales/Source/LAPACK/lapack-3.5.0.tgz -D <a class="code" href="group__dimensioned__constants.html#ga48a5d9609fd9405c69f13f8cecb19ee9">c</a> -DPentiumCPS=2800 -Fa alg -fPIC --shared</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>modify the path to the lapack tarball appropriately</dd>
<dd>
-fPIC may not be necessary along with &ndash;shared</dd>
<dd>
the -D c -DPentiumCPS=2800 flag tells ATLAS to use the highest accuracy clock, and the '2800' corresponds to processor speed in MHz. This can be found in cpufreq-info on ubuntu, or with lscpu.</dd></dl>
</li>
<li><p class="startli">In interfaces/lapack/C2F/src add -frecursive to: </p><div class="fragment"><div class="line">F77FLAGS = -O2 -mavx -fPIC -m64 -fPIC -frecursive</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>this is possibly necessary to make dyevr thread safe, maybe syevr too.</dd></dl>
</li>
<li><p class="startli">Now make</p><ol type="a">
<li>make build</li>
<li>make check</li>
<li>make time</li>
<li>make shared</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>there should be no non-ignored errors at each of these steps</dd></dl>
</li>
<li>Now install<ol type="a">
<li>sudo make install </li>
</ol>
</li>
</ul>
</li>
</ol>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Jul 9 2017 12:39:05 for mxlib by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
